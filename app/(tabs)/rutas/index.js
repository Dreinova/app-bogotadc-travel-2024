import { View, Text, Pressable } from "react-native";
import React, { useRef } from "react";
import { useDispatch, useSelector } from "react-redux";
import { fetchAllRutas } from "../../../src/store/actions";
import { GestureHandlerRootView } from "react-native-gesture-handler";
import { FlatList } from "react-native-gesture-handler";
import {
  selectActualLanguage,
  selectRutassData,
  selectWordsLang,
} from "../../../src/store/selectors";
import { PreloaderComponent, Switch } from "../../../src/components";
import { router } from "expo-router";

import { windowHeight } from "../../../src/constants/ScreenWidth";
import CardEventoBig from "../../../src/components/CardEventosBig";
import IconSvg from "../../../src/components/IconSvg";
import { Colors } from "../../../src/constants";

const RutassList = () => {
  const flatListRef = useRef(null);
 
  const dispatch = useDispatch();
  const wordsLanguage = useSelector(selectWordsLang);
  const actualLanguage = useSelector(selectActualLanguage);
  const eventsData = useSelector(selectRutassData);
  const [activeIndex, setActiveIndex] = React.useState(0);
  const [activeCat, setActiveCat] = React.useState(0);
  const [queriesCompleted, setQueriesCompleted] = React.useState(false);
  const [rutasAgrupadas, setRutasAgrupadas] = React.useState([]);
  const [rutasActivas, setRutasActivas] = React.useState([]);

  React.useEffect(() => {
    async function fetchData() {
      await dispatch(fetchAllRutas());
      setQueriesCompleted(true);
    }
    fetchData();
  }, [dispatch, actualLanguage]);

  React.useEffect(() => {
    if (eventsData && eventsData.length > 0) {
      const agrupadas = eventsData.reduce((agrupado, ruta) => {
        const campo = ruta.field_categor;
        if (!agrupado[campo]) {
          agrupado[campo] = [];
        }
        agrupado[campo].push(ruta);
        return agrupado;
      }, {});
      setRutasAgrupadas(agrupadas);
      setActiveCat(Object.keys(agrupadas)[0]);
      setRutasActivas(agrupadas[Object.keys(agrupadas)[0]]);
    }
  }, [eventsData, actualLanguage]);

  React.useEffect(() => {
    // console.log("Active Category:", activeCat);
    // console.log("Active Routes:", rutasActivas);
  }, [activeCat, rutasActivas, actualLanguage]);
  const scrollToTop = () => {
    if (flatListRef.current) {
      flatListRef.current.scrollToOffset({ animated: true, offset: 0 });
    }
  };

  if (!queriesCompleted) {
    return <PreloaderComponent />;
  }

  return (
    <GestureHandlerRootView style={{ flex: 1 }}>
      <View style={{ flexDirection: "row", alignItems: "center", padding: 20, gap: 8 }}>
        <IconSvg width="25" height="25" icon={`<svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 2.61229C17.6381 4.00719 16.7258 5.083 15.85 6.174C15.8233 6.21247 15.788 6.24425 15.747 6.26687C15.706 6.28948 15.6603 6.30232 15.6135 6.30438C15.5667 6.30644 15.52 6.29766 15.4772 6.27874C15.4343 6.25981 15.3964 6.23125 15.3664 6.19527C14.5842 5.32134 13.9281 4.34243 13.4171 3.28695C13.2192 2.8866 13.1506 2.43469 13.2209 1.99371C13.2912 1.55273 13.4969 1.14446 13.8094 0.82536C14.0986 0.472825 14.4879 0.21616 14.9261 0.0892084C15.3642 -0.0377428 15.8305 -0.0290174 16.2636 0.114234C16.7013 0.228872 17.0957 0.469384 17.3979 0.805943C17.7 1.1425 17.8967 1.5603 17.9635 2.00753C17.9635 2.04704 17.9878 2.08351 18 2.11997V2.61229ZM15.5976 5.54493C15.7739 5.317 15.9442 5.10123 16.1085 4.88243C16.5639 4.29529 16.9506 3.65803 17.261 2.98305C17.3603 2.75757 17.4052 2.51191 17.392 2.2659C17.3788 2.0199 17.3079 1.78044 17.185 1.56688C16.9676 1.15999 16.6024 0.851904 16.1645 0.706044C15.7266 0.560184 15.2494 0.58766 14.8312 0.782814C14.4152 0.974214 14.0915 1.32185 13.9304 1.75028C13.7693 2.1787 13.7837 2.65334 13.9706 3.07118C14.4185 3.95407 14.9642 4.78386 15.5976 5.54493Z" fill="#35498E"/><path d="M8.4359 18.0048C8.28385 17.9228 8.18046 17.8073 8.23215 17.625C8.28385 17.4426 8.42982 17.397 8.60316 17.4031C8.7765 17.4092 8.87382 17.4031 9.00762 17.4031C9.14143 17.4031 9.32997 17.4031 9.40296 17.5885C9.47595 17.7739 9.37863 17.8924 9.24483 18.0048H8.4359Z" fill="#35498E"/><path d="M6.57175 18.0048C6.51433 17.9502 6.46238 17.8902 6.41665 17.8255C6.39853 17.7801 6.39164 17.731 6.39657 17.6823C6.40149 17.6337 6.41809 17.587 6.44496 17.5461C6.47182 17.5052 6.50816 17.4714 6.55088 17.4476C6.5936 17.4238 6.64144 17.4106 6.69035 17.4092C6.86369 17.4092 7.04007 17.4092 7.21341 17.4092C7.38675 17.4092 7.53272 17.4487 7.58442 17.628C7.63611 17.8073 7.53272 17.9319 7.38371 18.0109L6.57175 18.0048Z" fill="#35498E"/><path d="M12.0912 18.0048C12.0243 17.9045 11.9179 17.8103 11.8966 17.7009C11.8753 17.5915 12.0152 17.4122 12.2007 17.397C12.3862 17.3818 12.5292 17.397 12.6903 17.397C12.8515 17.397 13.0218 17.397 13.0887 17.6067C13.1556 17.8164 13.0431 17.9106 12.9093 17.9987L12.0912 18.0048Z" fill="#35498E"/><path d="M13.9219 18.0048C13.7364 17.8589 13.6847 17.7434 13.7456 17.5945C13.7666 17.536 13.8062 17.4859 13.8584 17.4519C13.9105 17.4179 13.9723 17.4018 14.0345 17.4061H14.5788C14.6542 17.3949 14.7311 17.4125 14.7942 17.4553C14.8572 17.498 14.9019 17.5629 14.9194 17.6371C14.9559 17.789 14.8829 17.9076 14.7035 17.9866C14.6876 17.9946 14.6724 18.0037 14.6579 18.0139L13.9219 18.0048Z" fill="#35498E"/><path d="M10.2635 18.0048C10.1358 17.9228 10.0263 17.8255 10.0598 17.6553C10.069 17.5828 10.1056 17.5165 10.1622 17.4702C10.2187 17.4238 10.2909 17.4009 10.3639 17.4061H10.9721C11.0384 17.3978 11.1055 17.4134 11.1613 17.4502C11.2171 17.487 11.2579 17.5425 11.2762 17.6067C11.2973 17.6678 11.2984 17.7341 11.2793 17.7958C11.2601 17.8576 11.2218 17.9116 11.1698 17.9501C11.1471 17.9667 11.1258 17.985 11.1059 18.0048H10.2635Z" fill="#35498E"/><path d="M4.74402 18.0048C4.68721 17.9573 4.63618 17.9032 4.59196 17.8438C4.57045 17.7989 4.5603 17.7494 4.56241 17.6997C4.56451 17.6499 4.5788 17.6015 4.60403 17.5586C4.62925 17.5157 4.66464 17.4796 4.70708 17.4535C4.74951 17.4275 4.7977 17.4123 4.84741 17.4092C5.01771 17.4092 5.18801 17.4092 5.35527 17.4092C5.52253 17.4092 5.68674 17.4365 5.74756 17.6249C5.80838 17.8134 5.69282 17.9288 5.55294 18.0109L4.74402 18.0048Z" fill="#35498E"/><path d="M3.19921 18.0049C2.9985 17.8499 2.94984 17.701 3.04412 17.549C3.15569 17.4491 3.30026 17.3938 3.4501 17.3938C3.59994 17.3938 3.7445 17.4491 3.85608 17.549C3.95035 17.7071 3.89561 17.8529 3.68882 18.0018L3.19921 18.0049Z" fill="#35498E"/><path d="M3.2965 7.81202C4.16192 7.81029 4.99331 8.14872 5.6112 8.75425C6.22909 9.35979 6.58392 10.1838 6.59909 11.0486C6.58186 11.5648 6.44884 12.0706 6.20983 12.5285C5.66919 13.6595 5.01505 14.7327 4.25748 15.7317C4.03244 16.0356 3.79524 16.3395 3.55803 16.6434C3.53174 16.6858 3.49541 16.7211 3.45224 16.7461C3.40907 16.7712 3.36039 16.7852 3.31049 16.787C3.2606 16.7888 3.21103 16.7783 3.16616 16.7564C3.12129 16.7346 3.08251 16.702 3.05322 16.6616C1.99998 15.3796 1.09984 13.9793 0.37101 12.489C0.151079 12.0595 0.0246382 11.5882 1.40542e-06 11.1063C-0.000398609 10.6736 0.0845949 10.245 0.250118 9.84516C0.415641 9.4453 0.658444 9.08198 0.964633 8.776C1.27082 8.47002 1.63438 8.22738 2.03451 8.06197C2.43464 7.89655 2.86349 7.81162 3.2965 7.81202ZM3.2965 16.0173C3.55804 15.6587 3.80436 15.3244 4.0446 14.9871C4.67303 14.1282 5.21976 13.2125 5.67765 12.252C5.94168 11.7591 6.03979 11.1943 5.95743 10.6413C5.89753 10.2925 5.76926 9.95902 5.57999 9.65992C5.39072 9.36082 5.14419 9.10203 4.85454 8.89843C4.5649 8.69483 4.23785 8.55042 3.89219 8.4735C3.54653 8.39658 3.18907 8.38866 2.84035 8.45021C1.17689 8.71764 0.167259 10.5198 0.793717 11.9724C1.42017 13.4251 2.34465 14.7197 3.29955 16.0264L3.2965 16.0173Z" fill="#35498E"/><path d="M11.7111 8.71155C11.8175 8.71155 11.924 8.71155 12.0152 8.71155C12.0885 8.71809 12.1569 8.75094 12.2078 8.80402C12.2586 8.85711 12.2886 8.92682 12.2919 9.00025C12.2953 9.03771 12.291 9.07546 12.2794 9.11123C12.2677 9.147 12.249 9.18006 12.2243 9.20843C12.1996 9.23681 12.1695 9.25991 12.1356 9.27635C12.1018 9.2928 12.0649 9.30226 12.0274 9.30415C11.8006 9.31935 11.573 9.31935 11.3462 9.30415C11.2842 9.28492 11.23 9.24637 11.1915 9.19415C11.153 9.14194 11.1323 9.07878 11.1323 9.01393C11.1323 8.94907 11.153 8.88592 11.1915 8.8337C11.23 8.78149 11.2842 8.74294 11.3462 8.7237C11.4626 8.71611 11.5794 8.71611 11.6959 8.7237L11.7111 8.71155Z" fill="#35498E"/><path d="M15.3604 9.30411C15.257 9.30411 15.1505 9.30411 15.0563 9.30411C14.9794 9.29872 14.9074 9.26434 14.8549 9.20792C14.8024 9.1515 14.7733 9.07726 14.7734 9.00021C14.7718 8.92576 14.7996 8.85367 14.8509 8.79961C14.9021 8.74555 14.9727 8.71389 15.0471 8.71151C15.2639 8.69935 15.4812 8.69935 15.6979 8.71151C15.7368 8.71136 15.7753 8.71931 15.8109 8.73486C15.8466 8.75041 15.8786 8.7732 15.9049 8.8018C15.9312 8.83039 15.9513 8.86416 15.9638 8.90093C15.9764 8.93771 15.9811 8.9767 15.9777 9.01541C15.9777 9.09601 15.9457 9.17331 15.8886 9.2303C15.8316 9.28729 15.7543 9.31931 15.6736 9.31931C15.5702 9.31931 15.4638 9.31931 15.3695 9.31931L15.3604 9.30411Z" fill="#35498E"/><path d="M13.5418 8.71464C13.6522 8.70856 13.7629 8.70856 13.8733 8.71464C13.9106 8.71693 13.9471 8.72667 13.9806 8.74329C14.0141 8.75991 14.0439 8.78307 14.0683 8.8114C14.0927 8.83973 14.1111 8.87266 14.1225 8.90824C14.134 8.94382 14.1381 8.98132 14.1348 9.01854C14.1373 9.05401 14.1326 9.08961 14.121 9.12322C14.1094 9.15682 14.0911 9.18774 14.0672 9.21413C14.0434 9.24051 14.0144 9.26182 13.9822 9.27678C13.9499 9.29173 13.9149 9.30003 13.8794 9.30117C13.6515 9.31637 13.423 9.31637 13.1951 9.30117C13.1575 9.29973 13.1206 9.29056 13.0867 9.27422C13.0528 9.25787 13.0226 9.23472 12.9981 9.2062C12.9735 9.17767 12.9551 9.1444 12.944 9.10845C12.9329 9.0725 12.9294 9.03465 12.9336 8.99727C12.9328 8.92334 12.961 8.85203 13.0121 8.79863C13.0633 8.74522 13.1334 8.71398 13.2073 8.7116C13.3168 8.7116 13.4293 8.7116 13.5418 8.7116V8.71464Z" fill="#35498E"/><path d="M16.446 15.4521C16.4476 15.5228 16.4244 15.5918 16.3806 15.6472C16.3367 15.7027 16.2749 15.7412 16.2058 15.756C16.14 15.7743 16.0697 15.7677 16.0086 15.7374C15.9474 15.7071 15.8995 15.6553 15.8743 15.5919C15.7831 15.4035 15.6949 15.212 15.6158 15.0205C15.5848 14.959 15.578 14.8882 15.5965 14.8218C15.6151 14.7555 15.6577 14.6985 15.7162 14.6619C15.7416 14.6389 15.7713 14.6212 15.8037 14.6098C15.836 14.5984 15.8703 14.5935 15.9046 14.5955C15.9388 14.5975 15.9724 14.6063 16.0032 14.6213C16.034 14.6364 16.0615 14.6574 16.0841 14.6832C16.2696 14.9037 16.3943 15.1687 16.446 15.4521Z" fill="#35498E"/><path d="M15.9777 16.3486C16.2423 16.3486 16.4096 16.5492 16.3183 16.7285C16.1996 16.9558 16.0569 17.1698 15.8926 17.3667C15.8668 17.393 15.8361 17.4139 15.8021 17.4281C15.7682 17.4424 15.7317 17.4497 15.6949 17.4497C15.6581 17.4497 15.6216 17.4424 15.5877 17.4281C15.5538 17.4139 15.523 17.393 15.4972 17.3667C15.4431 17.3168 15.4089 17.2489 15.4011 17.1756C15.3932 17.1024 15.4123 17.0288 15.4547 16.9686C15.5641 16.8045 15.6706 16.6343 15.7922 16.4793C15.8463 16.4256 15.909 16.3815 15.9777 16.3486Z" fill="#35498E"/><path d="M9.35734 11.857C9.19617 12.1609 9.07148 12.4161 8.90727 12.6562C8.86773 12.7109 8.68831 12.7079 8.60316 12.6745C8.57328 12.6646 8.54571 12.6488 8.52216 12.628C8.4986 12.6072 8.47955 12.5817 8.46617 12.5533C8.45278 12.5248 8.44536 12.4939 8.44434 12.4625C8.44332 12.4311 8.44872 12.3998 8.46023 12.3706C8.56298 12.1332 8.68291 11.9037 8.81908 11.6837C8.85231 11.6368 8.90169 11.6037 8.95778 11.5908C9.01388 11.5779 9.07276 11.5861 9.12318 11.6138C9.211 11.6849 9.28966 11.7666 9.35734 11.857Z" fill="#35498E"/><path d="M17.9422 10.5653C17.8836 10.8701 17.712 11.1414 17.4617 11.3251C17.4073 11.3626 17.3404 11.3775 17.2752 11.3667C17.21 11.3559 17.1515 11.3203 17.112 11.2674C17.0642 11.2196 17.035 11.1564 17.0294 11.0891C17.0238 11.0217 17.0423 10.9546 17.0816 10.8996L17.3857 10.4104C17.4143 10.3523 17.4617 10.3056 17.5203 10.278C17.5788 10.2504 17.645 10.2435 17.708 10.2584C17.7766 10.2746 17.8374 10.314 17.8801 10.37C17.9228 10.4259 17.9448 10.495 17.9422 10.5653Z" fill="#35498E"/><path d="M17.7202 9.42578C17.6533 9.50479 17.6016 9.62027 17.5165 9.6537C17.4148 9.68068 17.3067 9.66988 17.2124 9.62331C17.0481 9.54126 16.9083 9.4197 16.7471 9.31941C16.684 9.28244 16.6364 9.22399 16.6129 9.15479C16.5895 9.08558 16.5918 9.01024 16.6194 8.94258C16.646 8.87382 16.6983 8.81803 16.7651 8.78688C16.832 8.75572 16.9084 8.75162 16.9782 8.77543C17.2305 8.85198 17.4547 9.001 17.6229 9.20393C17.6648 9.27337 17.6975 9.34794 17.7202 9.42578Z" fill="#35498E"/><path d="M14.4876 13.7958C14.6579 13.8292 14.8312 13.8505 14.9985 13.8961C15.075 13.9174 15.1401 13.9679 15.1799 14.0366C15.2196 14.1053 15.2309 14.1868 15.2113 14.2638C15.1887 14.3398 15.1372 14.404 15.0679 14.4426C14.9986 14.4812 14.9169 14.4912 14.8403 14.4704C14.6913 14.4461 14.5362 14.4218 14.3933 14.4097C14.1439 14.3914 14.0132 14.282 14.0253 14.0875C14.0375 13.893 14.1713 13.8049 14.4146 13.8079H14.4845L14.4876 13.7958Z" fill="#35498E"/><path d="M10.1693 8.10379C10.2168 7.92468 10.2736 7.74817 10.3396 7.575C10.3534 7.53919 10.3745 7.50664 10.4016 7.47942C10.4287 7.4522 10.4611 7.43091 10.4969 7.4169C10.5326 7.4029 10.5709 7.39648 10.6093 7.39806C10.6476 7.39964 10.6853 7.40919 10.7197 7.42609C10.793 7.45703 10.8511 7.51538 10.8818 7.58865C10.9125 7.66192 10.9133 7.74429 10.884 7.81812C10.8489 7.96244 10.8306 8.11029 10.8292 8.25878C10.8364 8.33523 10.8144 8.41158 10.7676 8.47247C10.7208 8.53336 10.6526 8.57427 10.5768 8.58699C10.5014 8.59816 10.4246 8.58062 10.3615 8.53784C10.2984 8.49507 10.2537 8.43018 10.2362 8.35603C10.218 8.27701 10.2119 8.19496 10.1997 8.11291L10.1693 8.10379Z" fill="#35498E"/><path d="M11.93 7.502C11.8266 7.502 11.7202 7.502 11.6259 7.502C11.553 7.4979 11.484 7.4677 11.4315 7.41692C11.379 7.36614 11.3465 7.29817 11.3401 7.22545C11.3323 7.15391 11.3527 7.08215 11.397 7.02541C11.4413 6.96866 11.5059 6.93141 11.5773 6.92155C11.8212 6.9018 12.0663 6.9018 12.3102 6.92155C12.3461 6.9253 12.3809 6.9362 12.4125 6.95361C12.4442 6.97101 12.472 6.99457 12.4944 7.02289C12.5168 7.05121 12.5333 7.08372 12.5429 7.11851C12.5525 7.1533 12.5551 7.18966 12.5504 7.22545C12.5455 7.29829 12.5146 7.36693 12.4632 7.41882C12.4118 7.47072 12.3435 7.5024 12.2706 7.50808C12.1642 7.50808 12.0426 7.502 11.93 7.502Z" fill="#35498E"/><path d="M10.3821 11.7081C10.2848 11.7081 10.1845 11.7081 10.078 11.7081C10.0006 11.7034 9.92784 11.6694 9.8747 11.6129C9.82156 11.5564 9.79204 11.4817 9.79218 11.4042C9.79248 11.3655 9.80075 11.3272 9.81646 11.2918C9.83217 11.2564 9.85499 11.2246 9.8835 11.1984C9.91202 11.1722 9.94562 11.1521 9.98222 11.1394C10.0188 11.1267 10.0576 11.1217 10.0963 11.1246C10.3031 11.1246 10.5068 11.1246 10.7045 11.1246C10.7801 11.1242 10.8532 11.152 10.9095 11.2026C10.9657 11.2532 11.001 11.3229 11.0086 11.3981C11.0091 11.4728 10.9822 11.545 10.9328 11.6011C10.8834 11.6571 10.8152 11.693 10.741 11.702C10.6235 11.7096 10.5057 11.7096 10.3882 11.702L10.3821 11.7081Z" fill="#35498E"/><path d="M12.2159 11.7081C12.1247 11.7081 12.0304 11.7081 11.9361 11.7081C11.8555 11.7081 11.7781 11.676 11.7211 11.619C11.6641 11.5621 11.632 11.4848 11.632 11.4042C11.6319 11.3652 11.6399 11.3266 11.6554 11.2909C11.6709 11.2551 11.6937 11.2229 11.7222 11.1964C11.7508 11.1699 11.7845 11.1495 11.8213 11.1366C11.8582 11.1237 11.8972 11.1186 11.9361 11.1215C12.1389 11.1215 12.3365 11.1215 12.5291 11.1215C12.5677 11.1191 12.6063 11.1244 12.6427 11.1373C12.6791 11.1501 12.7126 11.1702 12.741 11.1964C12.7694 11.2225 12.7922 11.2541 12.8081 11.2893C12.8239 11.3245 12.8325 11.3625 12.8332 11.4011C12.8334 11.4782 12.8043 11.5524 12.7518 11.6088C12.6993 11.6652 12.6273 11.6996 12.5504 11.705C12.4379 11.705 12.3284 11.705 12.2159 11.705V11.7081Z" fill="#35498E"/><path d="M14.0649 11.7081C13.9584 11.7081 13.852 11.7081 13.7608 11.7081C13.6833 11.7034 13.6106 11.6694 13.5574 11.6129C13.5043 11.5564 13.4748 11.4817 13.4749 11.4042C13.4818 11.3284 13.5168 11.258 13.5731 11.2068C13.6294 11.1556 13.7029 11.1273 13.779 11.1276C13.9767 11.1276 14.1774 11.1276 14.3872 11.1276C14.4259 11.1247 14.4647 11.1298 14.5013 11.1425C14.5379 11.1552 14.5715 11.1752 14.6 11.2015C14.6285 11.2277 14.6513 11.2595 14.6671 11.2949C14.6828 11.3303 14.691 11.3685 14.6913 11.4072C14.6915 11.4843 14.6624 11.5585 14.6099 11.6149C14.5574 11.6713 14.4854 11.7057 14.4085 11.7111C14.2747 11.7142 14.1713 11.7081 14.0649 11.7081Z" fill="#35498E"/><path d="M13.7668 7.50199C13.6564 7.50807 13.5458 7.50807 13.4354 7.50199C13.3667 7.50052 13.3012 7.47301 13.252 7.42505C13.2029 7.37708 13.1739 7.31225 13.1708 7.24368C13.1647 7.20931 13.1656 7.17407 13.1734 7.14004C13.1812 7.10601 13.1957 7.07389 13.2161 7.04556C13.2365 7.01724 13.2624 6.99328 13.2922 6.97511C13.322 6.95694 13.3552 6.94493 13.3897 6.93978C13.6458 6.91851 13.9031 6.91851 14.1591 6.93978C14.1935 6.94486 14.2265 6.95689 14.256 6.97514C14.2856 6.99339 14.3111 7.01747 14.3311 7.04592C14.351 7.07437 14.3649 7.10658 14.3719 7.14058C14.379 7.17458 14.379 7.20967 14.372 7.24368C14.3705 7.31522 14.3416 7.38346 14.2912 7.43434C14.2409 7.48522 14.1729 7.51487 14.1013 7.51719C13.9919 7.51719 13.8794 7.51719 13.7668 7.51719V7.50199Z" fill="#35498E"/><path d="M15.9078 11.1123C16.0051 11.1123 16.1054 11.1123 16.2119 11.1123C16.289 11.1121 16.3633 11.1412 16.4197 11.1937C16.4762 11.2462 16.5106 11.3181 16.516 11.3949C16.5197 11.4315 16.5162 11.4685 16.5055 11.5037C16.4948 11.5389 16.4771 11.5716 16.4536 11.5999C16.4301 11.6282 16.4012 11.6515 16.3686 11.6685C16.3359 11.6855 16.3002 11.6958 16.2636 11.6988C16.0307 11.714 15.797 11.714 15.5641 11.6988C15.4904 11.6911 15.4226 11.6552 15.375 11.5985C15.3273 11.5418 15.3035 11.4688 15.3087 11.3949C15.3141 11.3181 15.3485 11.2462 15.4049 11.1937C15.4614 11.1412 15.5357 11.1121 15.6128 11.1123C15.6979 11.1062 15.8135 11.1123 15.9078 11.1123Z" fill="#35498E"/><path d="M10.966 13.8141C11.0775 13.808 11.1891 13.808 11.3005 13.8141C11.3713 13.8194 11.4374 13.8511 11.4859 13.9029C11.5343 13.9547 11.5615 14.0228 11.5621 14.0937C11.5663 14.1296 11.5633 14.166 11.5534 14.2008C11.5434 14.2356 11.5266 14.2681 11.504 14.2964C11.4813 14.3247 11.4533 14.3482 11.4215 14.3655C11.3897 14.3829 11.3548 14.3938 11.3188 14.3976C11.0799 14.4143 10.84 14.4143 10.6011 14.3976C10.5651 14.3938 10.5302 14.3829 10.4984 14.3655C10.4666 14.3482 10.4386 14.3247 10.4159 14.2964C10.3933 14.2681 10.3765 14.2356 10.3665 14.2008C10.3566 14.166 10.3536 14.1296 10.3578 14.0937C10.3619 14.0208 10.3921 13.9518 10.443 13.8993C10.4938 13.8469 10.5618 13.8144 10.6346 13.808H10.966V13.8141Z" fill="#35498E"/><path d="M8.97718 13.2488C9.0745 13.3126 9.15356 13.3551 9.22351 13.4068C9.34515 13.501 9.45463 13.6043 9.57627 13.6925C9.6128 13.711 9.64521 13.7367 9.67155 13.7681C9.69789 13.7994 9.71761 13.8358 9.72954 13.875C9.74147 13.9141 9.74536 13.9553 9.74097 13.996C9.73658 14.0367 9.724 14.0761 9.70399 14.1119C9.68491 14.1488 9.658 14.1811 9.62514 14.2065C9.59227 14.232 9.55425 14.25 9.51371 14.2592C9.47317 14.2685 9.43111 14.2688 9.39044 14.2602C9.34977 14.2515 9.31148 14.2341 9.27825 14.2091C9.08695 14.0801 8.91141 13.9291 8.75519 13.7593C8.73049 13.713 8.71582 13.662 8.71216 13.6096C8.70849 13.5573 8.7159 13.5047 8.7339 13.4554C8.76127 13.3764 8.87987 13.3187 8.97718 13.2488Z" fill="#35498E"/><path d="M12.7876 13.8141C12.9041 13.808 13.0209 13.808 13.1374 13.8141C13.2059 13.818 13.2705 13.8477 13.3179 13.8974C13.3654 13.9471 13.3921 14.0129 13.3928 14.0815C13.3984 14.1165 13.3969 14.1523 13.3883 14.1867C13.3798 14.2211 13.3645 14.2534 13.3432 14.2818C13.3219 14.3101 13.2951 14.3339 13.2645 14.3517C13.2338 14.3695 13.1999 14.381 13.1647 14.3854C12.9147 14.4052 12.6636 14.4052 12.4136 14.3854C12.378 14.3824 12.3435 14.3718 12.3124 14.3543C12.2813 14.3368 12.2543 14.3129 12.2333 14.2841C12.2122 14.2552 12.1976 14.2223 12.1904 14.1873C12.1832 14.1524 12.1836 14.1163 12.1916 14.0815C12.189 14.0126 12.2132 13.9453 12.2591 13.8938C12.305 13.8422 12.3691 13.8104 12.4379 13.805C12.5544 13.7989 12.6711 13.7989 12.7876 13.805V13.8141Z" fill="#35498E"/><path d="M15.4333 7.5021C15.3757 7.50666 15.3177 7.50666 15.26 7.5021C15.1919 7.49829 15.1278 7.46894 15.0804 7.41992C15.0331 7.37091 15.006 7.30583 15.0046 7.23771C14.998 7.20417 14.9981 7.16965 15.0049 7.13616C15.0118 7.10267 15.0252 7.07087 15.0444 7.0426C15.0637 7.01433 15.0883 6.99016 15.117 6.97148C15.1456 6.95281 15.1777 6.94001 15.2113 6.93381C15.3664 6.90797 15.5246 6.90797 15.6797 6.93381C15.7136 6.93965 15.746 6.9522 15.775 6.97072C15.804 6.98924 15.829 7.01336 15.8485 7.04167C15.8681 7.06998 15.8818 7.1019 15.8888 7.13556C15.8958 7.16922 15.8961 7.20395 15.8895 7.23771C15.8864 7.30628 15.8574 7.37111 15.8083 7.41908C15.7591 7.46705 15.6936 7.49455 15.6249 7.49603C15.5641 7.49603 15.4972 7.49603 15.4333 7.49603V7.5021Z" fill="#35498E"/><path d="M16.4947 2.10787C16.4576 2.31917 16.3472 2.51065 16.1828 2.64863C16.0185 2.78661 15.8107 2.86225 15.596 2.86225C15.3814 2.86225 15.1736 2.78661 15.0092 2.64863C14.8448 2.51065 14.7344 2.31917 14.6974 2.10787C14.6974 1.86607 14.7935 1.63417 14.9646 1.4632C15.1357 1.29222 15.3677 1.19617 15.6097 1.19617C15.8469 1.20328 16.072 1.30247 16.2372 1.47268C16.4024 1.64289 16.4948 1.87073 16.4947 2.10787ZM15.8864 2.10787C15.8864 2.02727 15.8544 1.94997 15.7974 1.89298C15.7403 1.83598 15.663 1.80397 15.5823 1.80397C15.5017 1.80397 15.4243 1.83598 15.3673 1.89298C15.3103 1.94997 15.2782 2.02727 15.2782 2.10787C15.2782 2.18847 15.3103 2.26576 15.3673 2.32276C15.4243 2.37975 15.5017 2.41177 15.5823 2.41177C15.6237 2.41543 15.6654 2.41003 15.7045 2.39594C15.7436 2.38186 15.7791 2.35942 15.8087 2.3302C15.8382 2.30098 15.861 2.26568 15.8755 2.22676C15.89 2.18784 15.8958 2.14623 15.8925 2.10483L15.8864 2.10787Z" fill="#35498E"/><path d="M3.30564 12.0027C3.06841 12.004 2.83616 11.9348 2.63832 11.8039C2.44048 11.6731 2.28596 11.4865 2.19434 11.2678C2.10272 11.0491 2.07812 10.8082 2.12367 10.5755C2.16921 10.3429 2.28284 10.129 2.45016 9.96089C2.61749 9.79283 2.83097 9.67818 3.06356 9.63149C3.29614 9.58479 3.53737 9.60815 3.75666 9.69859C3.97595 9.78904 4.16344 9.9425 4.29537 10.1395C4.4273 10.3366 4.49773 10.5683 4.49773 10.8054C4.49853 10.9623 4.46829 11.1179 4.40874 11.2631C4.34919 11.4084 4.26151 11.5404 4.15073 11.6517C4.03996 11.7629 3.90827 11.8512 3.76324 11.9115C3.61821 11.9717 3.4627 12.0028 3.30564 12.0027ZM3.30564 11.3949C3.46694 11.3949 3.62165 11.3309 3.73571 11.2169C3.84977 11.1029 3.91385 10.9483 3.91385 10.7871C3.91385 10.626 3.84977 10.4714 3.73571 10.3574C3.62165 10.2434 3.46694 10.1793 3.30564 10.1793C3.14805 10.1849 2.99876 10.2513 2.88926 10.3647C2.77977 10.4781 2.71862 10.6296 2.71871 10.7871C2.71462 10.8659 2.72646 10.9447 2.75355 11.0188C2.78063 11.0929 2.82239 11.1608 2.87633 11.2184C2.93028 11.276 2.99529 11.3221 3.06749 11.354C3.13969 11.3859 3.21758 11.4029 3.29651 11.4041L3.30564 11.3949Z" fill="#35498E"/></svg>`} />
        <Text style={{ fontSize: 30, textAlign: "center", color: "#35498e", fontFamily: "MuseoSans_700" }}>
          {wordsLanguage[actualLanguage][66]}
        </Text>
      </View>
      <FlatList
        horizontal
        contentContainerStyle={{ paddingVertical: 10, alignItems: "center" }}
        data={Object.keys(rutasAgrupadas)}
        extraData={Object.keys(rutasAgrupadas)}
        renderItem={({ item, index }) => (
          <Pressable onPress={() => { scrollToTop();setActiveIndex(index); setActiveCat(item); setRutasActivas(rutasAgrupadas[item]); }}>
            <View style={{ borderRadius: 18, backgroundColor: activeIndex == index ? Colors.orange : "transparent", marginLeft: 20, alignItems: "center", justifyContent: "center", padding: 10, height: 40 }}>
              <Text style={{ fontSize: 14, lineHeight: 14, color: activeIndex == index ? "#FFF" : Colors.orange, fontFamily: "MuseoSans_700", textAlignVertical: "center" }}>
                {item}
              </Text>
            </View>
          </Pressable>
        )}
      />
      <FlatList
        horizontal
        contentContainerStyle={{ paddingBottom: 50, paddingHorizontal: 20 }}
        style={{ height: windowHeight - 130 }}
        ItemSeparatorComponent={() => <View style={{ marginHorizontal: 10 }} />}
        data={rutasActivas}
        extraData={rutasActivas}
        ref={flatListRef}
        renderItem={({ item }) => {
          return (
            <CardEventoBig
              isRuta
              isHorizontal
              onPress={() => router.navigate(`(tabs)/rutas/${item.nid}`)}
              title={item.title}
              desc={item.field_descripcion_corta}
              image={`https://bogotadc.travel${item.field_thumbnail ? item.field_thumbnail : "/img/noimg.png"}`}
            />
        )}}
      />
    </GestureHandlerRootView>
  );
};

export default RutassList;